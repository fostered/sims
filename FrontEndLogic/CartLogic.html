<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   
    <title>SIMS</title>

    <!-- Bootstrap core CSS-->
    <link href="../libraries/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <link href="../libraries/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template-->
    <link href="../css/sb-admin.css" rel="stylesheet">

    <!--Javascript libraries to create sockets and  any possible D3 charts and designs-->
    <script type="text/javascript" src='http://d3js.org/d3.v2.js'></script>
    <script src="js/socket.io.js"></script>
    <script id='code-js' type="text/javascript" >
    
    </script>
    <script>
    var socket;
    var stats;
  
    function setupSocket() {
  
      socket = new WebSocket('ws://127.0.0.1:8887');
    
  
      socket.onopen = function () {
          //document.getElementById("received").innerHTML = "connect";
          socket.send("CART,10291231");
      };
  
      // Log errors
      socket.onerror = function (error) {
          console.error('WebSocket Error ' + error);
      };
  
      // Fills the cart with every item it finds
      socket.onmessage = function (e) {
        var items = e.data.split(",");
        //alert(e.data);
        //document.getElementById("myList").innerHTML = e.data;
        for (var i = 0; i < items.length; i++) {
        document.getElementById("myList").innerHTML += "<li class='list-group-item d-flex justify-content-between align-items-center'>" + items[i] + "<button  onclick='deleteListItem()'  class='btn btn-primary' type='button'> <i class='fas fa-trash-alt'></i></button></li>";
      }

      };
  
    }

    setupSocket();
  
    //setupSocket("CART,10291231");



    //function addToCart(name){

    //window.transaction = name + ",0000,01"; 
    //socket.send(window.transaction);
    //}



// allows a user to delete an item from the list
function deleteListItem(){

var listItems = document.querySelectorAll("li");  // or document.querySelectorAll("li"); 
for (var i = 0; i < listItems.length; i++) {
  listItems[i].onclick = function() {this.parentNode.removeChild(this);}
}


}
 

    </script>
  </head>
  <body id="page-top">

      
     


<style>

.assetsInCart {

 position:relative;

}

h2{

text-align: center;


}

#finalReserve{

text-align: center;
}

</style>




      <!-- left main Sidebar -->

    <div id="wrapper">

      <ul class="sidebar navbar-nav">

          <li class="nav-item active ">
              <a class="navbar-brand mr-1"style="color: black" id="sidebarToggle" href="#">SIMS</a>
            </li>
       
           
                
              <li class="nav-item active">
                <a class="nav-link" href="UserAssets.html">
                  <i class="fas fa-list-alt"></i>
                  <span>assets</span>
                </a>
              </li>     
      
      
      
              
              <li class="nav-item active">
                <a class="nav-link" href="../login.html">
                  <i class="fas fa-power-off"></i> 
                  <span>LOG OUT</span>
                </a>
              </li>
      
        
      </ul> 
      
      
      <div id="content-wrapper">
  
        <div class="container-fluid">
    
          
          <!-- Breadcrumbs
=======
          
          <!-- Breadcrumbs-->

          <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a style="color: black; font-size:25px " href="cart.html">Cart</a>
              </li>
            </ol> 

          <!-- create a socket connection to be able to read and write to the Hashgraph asynchronously-->
          </div>
  

          
<div class="assetsInCart" > 

  <h2> My Cart </h2>

    <ul id='myList' class='list-group'>

    </ul>

  </div>

      <div   id="finalReserve">
<br>
<br>
<br>
          <!-- WHEN CLICK, THE USER WILL DO THE FINAL CHECK OUT.-->

          <button class="btn btn-primary" onclick="location.href='UserAssets.html'" type="button"  >
           Reserve More
         </button>
       
  <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModalCenter" onclick="makeReservation()">
     Check Out
  </button>

      </div>

      <script>
        function makeReservation() {
          setupSocket("CHECKOUT,01010101");
        }
      </script>




<!-- Modal pop out for success in check out -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Success</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       <p> You have successfully checked out all items.  </p> <br>
       <p> Thank you. </p> <br>
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      
      </div>
    </div>
  </div>
</div>


</div> <!-- /.content-wrapper -->
     

</div>
          <!-- create a socket connection to be able to read and write to the Hashgraph asynchronously-->
          </div>
      
        <!-- Sticky Footer -->
        <footer class="sticky-footer">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>University of Massachusetts Dartmouth SIMS 2018</span>
            </div>
          </div>
        </footer>
      </div>

<!-- /.content-wrapper -->

    <!-- /#wrapper -->   
    </div>
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">Ã—</span>
            </button>
          </div>
          <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="login.html">Logout</a>
          </div>
        </div>
      </div>

     


    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="../libraries/jquery/jquery.min.js"></script>
    <script src="../libraries/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="../libraries/jquery-easing/jquery.easing.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="../js/sb-admin.min.js"></script>
  </body>

</html>